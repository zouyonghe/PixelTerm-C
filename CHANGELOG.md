# Changelog

- v1.1.14: Implement dithering control. Dithering is now disabled by default. Added `--dither` and `-D` command-line arguments to enable it. Implemented 'D' key binding to toggle dithering on/off in single image and preview grid modes. Fixed a bug where dithering setting was not correctly propagated to the preloader's internal renderer, and ensured cache is cleared upon toggling to force re-render.
- v1.1.13: Enhance TAB key navigation and refine help text. Implemented contextual TAB behavior for file manager entry/exit, allowing return to previous view (single image or preview grid) on TAB from FM, and making TAB invalid if FM was entered directly without a prior view mode. Fixed compilation errors in src/app.c (missing parentheses in printf statements). Refined help text for preview grid mode, changing 'Enter Toggle' to 'Enter Open', replacing 'q Back' with 'ESC Exit', and capitalizing action words for consistency.
- v1.1.12: Fix mosaic artifacts in Konsole and other terminals by disabling dithering in the renderer configuration for image viewing, preview grid, and GIF playback.
- v1.1.11: Fix file manager selection jumping on long press of arrow keys by robustly parsing terminal escape sequences, supporting both `^[[` and `^[O` prefixes, and preventing greedy consumption of next sequence headers.
- v1.1.9: Fix GIF ghosting artifacts during window resize by clearing the screen area after each frame. Resolve Chafa assertion failures by correctly initializing dither_mode and color_extractor in renderer configuration. Fix compilation error in preloader module.
- v1.1.8: Add high-performance animated GIF support with correct frame timing and TrueColor rendering. Significantly improve image quality by enabling advanced Chafa features (work_factor=9, median color extraction, ordered dither, all optimizations) and removing ASCII symbol restrictions to allow full Unicode block character usage. Fix animation glitches when switching modes and ensure correct terminal resizing behavior during playback.
- v1.1.7: Unify all comments to English for better maintainability and consistency, standardize comment format throughout the codebase, improve clarity of comments in file manager scrolling functions, and fix minor comment issues in other functions.
- v1.1.6: Add invalid image file handling and display improvements, implement proper validation using magic numbers, show invalid files with [Invalid] label in file manager, only highlight filename (not [Invalid] label) when invalid files are selected, prevent opening invalid image files, add intelligent mode switching when opening invalid files, implement empty directory detection with centered (No items) message, and update browser scanning to filter out invalid image files.
- v1.1.5: Fix 0KB image file handling by implementing proper validation using magic numbers instead of strict image loading, add white background red text display for selected invalid files, show centered "（No items）" message in empty directories, skip invalid files in preview grid, and implement intelligent mode switching when opening invalid files directly.
- v1.1.4: Refactored code and documentation for improved performance and consistency. Restored ImageRenderer's internal caching due to its crucial role in performance, especially when preloading is disabled or during frequent dimension changes. Re-confirmed and removed various unused code including unnecessary <pthread.h> include, browser file filtering/sorting functions, input_is_key_pressed function, and unused mouse event fields. Synchronized docs/ARCHITECTURE.md and include/common.h with current codebase by removing outdated references.
- v1.1.1: Improve file manager scrolling/rendering so the highlighted row stays centered even when the directory has fewer rows than the viewport or when wrapping back to the top.
- v1.1.0: Fix Chinese filename centering in the browser by using UTF-8 display width instead of byte length and improve truncation to respect multibyte characters.
- v1.0.20: Improve file manager scrolling/rendering so the highlighted row stays centered even when the directory has fewer rows than the viewport or when wrapping back to the top.
- v1.0.19: Add support for image files without extensions by implementing magic number detection for JPEG, PNG, GIF, WebP, BMP, and TIFF formats, automatically detecting image files without file extensions by reading file headers while maintaining backward compatibility with extension-based detection.
- v1.0.18: Add wrap-around navigation in file manager (up from top jumps to bottom, down from bottom jumps to top), fix preview zoom jumping issues by using floating-point precision and proper rounding, improve terminal geometry fallback and Konsole handling, clamp terminal cell aspect ratio to sane range, and prefer local chafa at runtime.
- v1.0.16: File manager now sorts entries in AaBb order (uppercase before lowercase within each letter) and skips `$…` system items, matching `ls` ordering while keeping directories grouped ahead of files.
- v1.0.15: Add support for image files without extensions by implementing magic number detection for JPEG, PNG, GIF, WebP, BMP, and TIFF formats, automatically detecting image files without file extensions by reading file headers while maintaining backward compatibility with extension-based detection.
- v1.0.14: File manager header now truncates and centers long/UTF-8 paths correctly, and long file/folder names use smarter centering-friendly truncation.
- v1.0.13: Preview grid UX polish (single render on entry, predictable zoom with min 2 columns, better paging/wrap), preloader now truly pauses/disables without burning CPU and fixes cache ownership, and CLI error messages are clearer for help/version/argument cases.
